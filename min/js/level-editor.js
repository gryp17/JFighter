function LevelEditor(e){var t=this;this.container=e,this.backgroundContainer=this.container.find(".background-container"),this.controlsContainer=this.container.find(".controls-container"),this.controls=this.container.find(".controls"),this.dragging=!1,this.draggedObject,this.init=function(){$(window).resize(function(){t.showControlsContainer()}),this.backgroundContainer.on("mousewheel",function(e){var t=$(document).scrollLeft();$(document).scrollLeft(t+40*e.deltaY),e.preventDefault()}),$(".theme").change(function(){t.setLevelTheme($(this).val())}),this.controls.find(".game-object").mousedown(function(e){t.draggedObject=$(this).clone(),t.draggedObject.css({position:"absolute"}),t.draggedObject.css({top:e.pageY,left:e.pageX}),$("body").append(t.draggedObject),t.dragging=!0,e.preventDefault()}),$("body").mouseup(function(e){if(t.dragging){if(e.pageY>t.backgroundContainer.height())return;t.draggedObject.css({top:e.pageY,left:e.pageX}),t.draggedObject.appendTo(t.backgroundContainer),t.draggedObject=null,t.dragging=!1,console.log(e.pageX+" --- "+e.pageY)}}),this.container.mousemove(function(e){t.dragging&&t.draggedObject.css({top:e.pageY,left:e.pageX})}),$(".save-level-button").click(function(){var e=[],n=t.backgroundContainer.find(".game-object");n.each(function(){var t=$(this),n=parseInt(t.css("left").replace("px","")),o=parseInt(t.css("top").replace("px",""));n+=30*n/100,e.push({objectType:t.attr("data-object"),arguments:{x:n,y:o}})}),console.log(e)}),this.showControlsContainer()},this.showControlsContainer=function(){this.controlsContainer.css("width",$(window).width()),this.controlsContainer.fadeIn(500)},this.setLevelTheme=function(e){var t="img/levels/",n=".jpg";this.backgroundContainer.css({backgroundImage:"url("+t+e+n+")"})}}var editor=new LevelEditor($("#container"));editor.init();