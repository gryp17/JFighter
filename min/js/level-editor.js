function LevelEditor(t){var e=this;this.container=t,this.backgroundContainer=this.container.find(".background-container"),this.controlsContainer=this.container.find(".controls-container"),this.controls=this.container.find(".controls"),this.canvasHeight=620,this.backgroundImageHeight=this.backgroundContainer.height(),this.heightOffset=this.backgroundImageHeight-this.canvasHeight,this.dragging=!1,this.draggedObject,this.groundObjects={Sherman:{groundDistance:10},Civilian:{groundDistance:24}},this.groundHeight=40,this.init=function(){this.backgroundContainer.on("mousewheel",function(t){var e=$(document).scrollLeft();$(document).scrollLeft(e+40*t.deltaY),t.preventDefault()}),$(".theme").change(function(){e.setLevelTheme($(this).val())}),this.controls.find(".game-object").mousedown(function(t){e.draggedObject=$(this).clone(),e.draggedObject.css({position:"absolute"}),e.draggedObject.css({top:t.pageY,left:t.pageX}),$("body").append(e.draggedObject),e.dragging=!0,t.preventDefault()}),$("body").mouseup(function(t){if(e.dragging){if(t.pageY>e.backgroundContainer.height())return;var n=t.pageY,a=t.pageX;if(e.groundObjects[e.draggedObject.attr("data-object")]){var i=e.groundObjects[e.draggedObject.attr("data-object")];n=e.backgroundImageHeight-i.groundDistance-e.draggedObject.height()}e.draggedObject.css({top:n,left:a}),e.draggedObject.appendTo(e.backgroundContainer),e.draggedObject=null,e.dragging=!1}}),this.container.mousemove(function(t){e.dragging&&e.draggedObject.css({top:t.pageY,left:t.pageX})}),$(".save-level-button").click(function(){var t=[],n=e.backgroundContainer.find(".game-object");n.each(function(){var n=$(this),a=n.offset(),i=a.left,o=a.top;o-=e.heightOffset,t.push({objectType:n.attr("data-object"),arguments:{x:i,y:o}})}),console.log(t)})},this.setLevelTheme=function(t){var e="img/levels/",n=".jpg";this.backgroundContainer.css({backgroundImage:"url("+e+t+n+")"})}}var editor=new LevelEditor($("#container"));editor.init();